<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Debug CardMarket Variantes 151</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    body {
      font-family: monospace;
      background: #1a1a1a;
      color: #e0e0e0;
      padding: 20px;
      max-width: 1400px;
      margin: 0 auto;
    }
    h1 { color: #4ade80; }
    h2 { color: #60a5fa; margin-top: 30px; }
    .card {
      background: #2a2a2a;
      border: 1px solid #404040;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
    }
    .success { color: #4ade80; }
    .error { color: #f87171; }
    .warning { color: #fbbf24; }
    .info { color: #60a5fa; }
    pre {
      background: #0a0a0a;
      border: 1px solid #404040;
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto;
    }
    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    button {
      background: #4ade80;
      color: #0a0a0a;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      margin: 10px 5px;
    }
    button:hover { background: #22c55e; }
    .url-test {
      background: #1e293b;
      border: 1px solid #475569;
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
    }
    .url-test a {
      color: #60a5fa;
      text-decoration: none;
    }
    .url-test a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h1>üîç Debug CardMarket - Variantes Extension 151</h1>
  <p class="info">Investigation des cartes avec variantes (V1, V2, etc.) de l'extension 151</p>

  <div>
    <button onclick="searchSquirtleEverywhere()">üîé Chercher "Squirtle" dans TOUTE la base</button>
    <button onclick="findCorrectExpansionId()">üîç Trouver le bon ID pour l'extension 151</button>
    <button onclick="listFirst50Cards()">üìã Lister les 50 premi√®res cartes de l'extension 151</button>
  </div>
  <div style="margin-top: 10px;">
    <button onclick="analyzeHypno()">Analyser Hypno #97 (‚úÖ Fonctionne)</button>
    <button onclick="analyzeSquirtle()">Analyser Squirtle #7 (‚ùå Carte NORMALE qui √©choue)</button>
    <button onclick="analyzeOmanyte()">Analyser Omanyte #138 (‚ùå √âchoue)</button>
  </div>

  <div id="results"></div>

  <script>
    const SUPABASE_URL = 'https://ubphwlmnfjdaiarbihcx.supabase.co'
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVicGh3bG1uZmpkYWlhcmJpaGN4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5NDAwMDIsImV4cCI6MjA3NTUxNjAwMn0.7d0303MNw__AVC9wkS7BodK2WG8Rvb2IY2V-0wv0l7Q'

    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY)

    function displayResults(html) {
      document.getElementById('results').innerHTML = html
    }

    async function analyzeHypno() {
      displayResults('<p class="info">‚è≥ Recherche de Hypno #97 dans discovered_cards...</p>')

      try {
        // Chercher Hypno #97 dans discovered_cards
        const { data: cards, error } = await supabase
          .from('discovered_cards')
          .select('*')
          .ilike('name', '%hypno%')
          .eq('number', '97')

        if (error) throw error

        let html = '<h2>üîç Hypno #97 (Extension 151) - Carte qui FONCTIONNE</h2>'

        if (cards.length === 0) {
          html += '<p class="warning">‚ö†Ô∏è Aucun Hypno #97 trouv√© dans discovered_cards</p>'
        } else {
          cards.forEach(card => {
            html += `<div class="card">
              <h3 class="success">‚úÖ Trouv√© : ${card.name} #${card.number}</h3>
              <p><strong>ID:</strong> ${card.id}</p>
              <p><strong>Extension:</strong> ${card.set?.name || 'N/A'} (set_id: ${card.set_id})</p>
              <p><strong>URL attendue:</strong> <code>Hypno-MEW097</code></p>
              <pre>${JSON.stringify(card, null, 2)}</pre>
            </div>`
          })
        }

        // Chercher dans cardmarket_singles
        html += '<h2>üîç Recherche dans cardmarket_singles</h2>'
        const { data: cmCards, error: cmError } = await supabase
          .from('cardmarket_singles')
          .select('*')
          .ilike('name', '%hypno%')
          .eq('id_expansion', 1549) // Extension 151 sur CardMarket

        if (cmError) throw cmError

        if (cmCards.length === 0) {
          html += '<p class="warning">‚ö†Ô∏è Aucun Hypno trouv√© dans cardmarket_singles pour extension 151</p>'
        } else {
          html += `<p class="success">‚úÖ ${cmCards.length} cartes Hypno trouv√©es dans CardMarket (extension 151)</p>`
          cmCards.forEach(cm => {
            html += `<div class="card">
              <h3>${cm.name}</h3>
              <p><strong>ID Produit:</strong> ${cm.id_product}</p>
              <p><strong>ID Extension:</strong> ${cm.id_expansion} (151)</p>
              <p><strong>Attaques:</strong> ${cm.attacks || 'N/A'}</p>
              <div class="url-test">
                <strong>Test URL CardMarket:</strong><br/>
                <a href="https://www.cardmarket.com/en/Pokemon/Products/Singles/151/${cm.name.replace(/\s+/g, '-').replace(/\[/g, '').replace(/\]/g, '')}?language=2" target="_blank">
                  ‚Üí Tester ce lien
                </a>
              </div>
            </div>`
          })
        }

        displayResults(html)
      } catch (error) {
        displayResults(`<p class="error">‚ùå Erreur: ${error.message}</p>`)
      }
    }

    async function analyzeSquirtle() {
      displayResults('<p class="info">‚è≥ Recherche de Squirtle #7 dans discovered_cards...</p>')

      try {
        // Chercher Squirtle #7 dans discovered_cards
        const { data: cards, error } = await supabase
          .from('discovered_cards')
          .select('*')
          .ilike('name', '%squirtle%')
          .eq('number', '7')

        if (error) throw error

        let html = '<h2>üîç Squirtle #7 (Extension 151) - Carte NORMALE qui √âCHOUE</h2>'
        html += '<p class="warning">‚ö†Ô∏è Squirtle est une carte NORMALE (pas ex, V, VMAX, etc.) mais a quand m√™me V1 dans l\'URL CardMarket !</p>'

        if (cards.length === 0) {
          html += '<p class="warning">‚ö†Ô∏è Aucun Squirtle #7 trouv√© dans discovered_cards</p>'
        } else {
          cards.forEach(card => {
            html += `<div class="card">
              <h3 class="error">‚ùå Trouv√© : ${card.name} #${card.number}</h3>
              <p><strong>ID:</strong> ${card.id}</p>
              <p><strong>Extension:</strong> ${card.set?.name || 'N/A'} (set_id: ${card.set_id})</p>
              <p><strong>URL attendue (URL R√âELLE qui fonctionne):</strong> <code class="success">Squirtle-V1-MEW007</code></p>
              <p><strong>URL g√©n√©r√©e actuellement:</strong> <code class="error">Squirtle-MEW007</code> (manque le "V1" ‚ùå)</p>
              <p class="info">üí° Ceci prouve que le probl√®me affecte aussi les cartes NORMALES, pas seulement les cartes sp√©ciales !</p>
              <pre>${JSON.stringify(card, null, 2)}</pre>
            </div>`
          })
        }

        // Chercher dans cardmarket_singles
        html += '<h2>üîç Recherche dans cardmarket_singles</h2>'
        const { data: cmCards, error: cmError } = await supabase
          .from('cardmarket_singles')
          .select('*')
          .ilike('name', '%squirtle%')
          .eq('id_expansion', 1549) // Extension 151 sur CardMarket

        if (cmError) throw cmError

        if (cmCards.length === 0) {
          html += '<p class="warning">‚ö†Ô∏è Aucun Squirtle trouv√© dans cardmarket_singles pour extension 151</p>'
        } else {
          html += `<p class="success">‚úÖ ${cmCards.length} cartes Squirtle trouv√©es dans CardMarket (extension 151)</p>`
          html += '<p class="info">üìù Regardez si le nom contient "V1", "V2", etc. dans la base CardMarket</p>'
          cmCards.forEach(cm => {
            const hasVariant = /V\d+/.test(cm.name)
            html += `<div class="card">
              <h3 ${hasVariant ? 'class="warning"' : ''}>${cm.name} ${hasVariant ? '‚ö†Ô∏è VARIANTE D√âTECT√âE' : ''}</h3>
              <p><strong>ID Produit:</strong> ${cm.id_product}</p>
              <p><strong>ID Extension:</strong> ${cm.id_expansion} (151)</p>
              <p><strong>Attaques:</strong> ${cm.attacks || 'N/A'}</p>
              <div class="url-test">
                <strong>Test URL CardMarket:</strong><br/>
                <a href="https://www.cardmarket.com/en/Pokemon/Products/Singles/151/${cm.name.replace(/\s+/g, '-').replace(/\[/g, '').replace(/\]/g, '')}?language=2" target="_blank">
                  ‚Üí Tester ce lien
                </a>
              </div>
            </div>`
          })
        }

        displayResults(html)
      } catch (error) {
        displayResults(`<p class="error">‚ùå Erreur: ${error.message}</p>`)
      }
    }

    async function analyzeOmanyte() {
      displayResults('<p class="info">‚è≥ Recherche de Omanyte #138 dans discovered_cards...</p>')

      try {
        // Chercher Omanyte #138 dans discovered_cards
        const { data: cards, error } = await supabase
          .from('discovered_cards')
          .select('*')
          .ilike('name', '%omanyte%')
          .eq('number', '138')

        if (error) throw error

        let html = '<h2>üîç Omanyte #138 (Extension 151) - Carte qui √âCHOUE</h2>'

        if (cards.length === 0) {
          html += '<p class="warning">‚ö†Ô∏è Aucun Omanyte #138 trouv√© dans discovered_cards</p>'
        } else {
          cards.forEach(card => {
            html += `<div class="card">
              <h3 class="error">‚ùå Trouv√© : ${card.name} #${card.number}</h3>
              <p><strong>ID:</strong> ${card.id}</p>
              <p><strong>Extension:</strong> ${card.set?.name || 'N/A'} (set_id: ${card.set_id})</p>
              <p><strong>URL attendue:</strong> <code class="warning">Omanyte-V1-MEW138</code> (note le "V1" !)</p>
              <p><strong>URL g√©n√©r√©e actuellement:</strong> <code class="error">Omanyte-MEW138</code> (manque le "V1" ‚ùå)</p>
              <pre>${JSON.stringify(card, null, 2)}</pre>
            </div>`
          })
        }

        // Chercher dans cardmarket_singles
        html += '<h2>üîç Recherche dans cardmarket_singles</h2>'
        const { data: cmCards, error: cmError } = await supabase
          .from('cardmarket_singles')
          .select('*')
          .ilike('name', '%omanyte%')
          .eq('id_expansion', 1549) // Extension 151 sur CardMarket

        if (cmError) throw cmError

        if (cmCards.length === 0) {
          html += '<p class="warning">‚ö†Ô∏è Aucun Omanyte trouv√© dans cardmarket_singles pour extension 151</p>'
        } else {
          html += `<p class="success">‚úÖ ${cmCards.length} cartes Omanyte trouv√©es dans CardMarket (extension 151)</p>`
          html += '<p class="info">üìù Comparez les noms : devrait contenir "V1", "V2", etc.</p>'
          cmCards.forEach(cm => {
            const hasVariant = /V\d+/.test(cm.name)
            html += `<div class="card">
              <h3 ${hasVariant ? 'class="warning"' : ''}>${cm.name} ${hasVariant ? '‚ö†Ô∏è VARIANTE' : ''}</h3>
              <p><strong>ID Produit:</strong> ${cm.id_product}</p>
              <p><strong>ID Extension:</strong> ${cm.id_expansion} (151)</p>
              <p><strong>Attaques:</strong> ${cm.attacks || 'N/A'}</p>
              <div class="url-test">
                <strong>Test URL CardMarket:</strong><br/>
                <a href="https://www.cardmarket.com/en/Pokemon/Products/Singles/151/${cm.name.replace(/\s+/g, '-').replace(/\[/g, '').replace(/\]/g, '')}?language=2" target="_blank">
                  ‚Üí Tester ce lien
                </a>
              </div>
            </div>`
          })
        }

        displayResults(html)
      } catch (error) {
        displayResults(`<p class="error">‚ùå Erreur: ${error.message}</p>`)
      }
    }

    async function searchAllVariants() {
      displayResults('<p class="info">‚è≥ Recherche de toutes les cartes avec variantes dans extension 151...</p>')

      try {
        const { data: cmCards, error } = await supabase
          .from('cardmarket_singles')
          .select('name, id_product, id_expansion')
          .eq('id_expansion', 1549)
          .order('name')

        if (error) throw error

        const variants = cmCards.filter(c => /V\d+/.test(c.name))
        const noVariants = cmCards.filter(c => !/V\d+/.test(c.name))

        let html = '<h2>üìä Statistiques Extension 151 (CardMarket)</h2>'
        html += `<div class="card">
          <p><strong>Total cartes:</strong> ${cmCards.length}</p>
          <p class="warning"><strong>Cartes avec variantes (V1, V2, etc.):</strong> ${variants.length}</p>
          <p class="success"><strong>Cartes sans variantes:</strong> ${noVariants.length}</p>
        </div>`

        html += '<h2>‚ö†Ô∏è Cartes avec variantes (probl√©matiques)</h2>'
        html += '<p class="info">Ces cartes n√©cessitent "V1", "V2", etc. dans l\'URL</p>'

        const variantGroups = {}
        variants.forEach(c => {
          const baseName = c.name.replace(/\s+V\d+.*/, '')
          if (!variantGroups[baseName]) variantGroups[baseName] = []
          variantGroups[baseName].push(c)
        })

        Object.entries(variantGroups).forEach(([baseName, cards]) => {
          html += `<div class="card">
            <h3>${baseName} (${cards.length} variantes)</h3>
            <ul>`
          cards.forEach(c => {
            html += `<li><strong>${c.name}</strong> (ID: ${c.id_product})</li>`
          })
          html += `</ul></div>`
        })

        displayResults(html)
      } catch (error) {
        displayResults(`<p class="error">‚ùå Erreur: ${error.message}</p>`)
      }
    }

    async function searchCardMarketDatabase() {
      displayResults('<p class="info">‚è≥ Analyse compl√®te de la base CardMarket pour extension 151...</p>')

      try {
        // Compter les variantes par Pok√©mon
        const { data: allCards, error } = await supabase
          .from('cardmarket_singles')
          .select('name, id_product')
          .eq('id_expansion', 1549)
          .order('name')

        if (error) throw error

        // Grouper par base name
        const pokemonGroups = {}
        allCards.forEach(card => {
          // Extraire le nom de base (avant MEW ou V1/V2)
          const baseName = card.name
            .replace(/\s+MEW\d+.*/, '')  // Supprimer MEW138 etc.
            .replace(/\s+V\d+.*/, '')     // Supprimer V1, V2 etc.
            .trim()

          if (!pokemonGroups[baseName]) {
            pokemonGroups[baseName] = []
          }
          pokemonGroups[baseName].push(card)
        })

        let html = '<h2>üìä Analyse par Pok√©mon (Extension 151)</h2>'

        // Trier par nombre de variantes (d√©croissant)
        const sorted = Object.entries(pokemonGroups).sort((a, b) => b[1].length - a[1].length)

        const multiVariant = sorted.filter(([_, cards]) => cards.length > 1)
        const singleVariant = sorted.filter(([_, cards]) => cards.length === 1)

        html += `<div class="card">
          <p><strong>Total Pok√©mon diff√©rents:</strong> ${sorted.length}</p>
          <p class="warning"><strong>Pok√©mon avec plusieurs variantes:</strong> ${multiVariant.length}</p>
          <p class="success"><strong>Pok√©mon sans variante:</strong> ${singleVariant.length}</p>
        </div>`

        html += '<h2>‚ö†Ô∏è Top 20 Pok√©mon avec le plus de variantes</h2>'
        multiVariant.slice(0, 20).forEach(([baseName, cards]) => {
          html += `<div class="card">
            <h3>${baseName} <span class="warning">(${cards.length} variantes)</span></h3>
            <ul>`
          cards.forEach(c => {
            const variant = c.name.match(/V\d+/) ? c.name.match(/V\d+/)[0] : 'standard'
            html += `<li><strong>${c.name}</strong> - Variante: ${variant}</li>`
          })
          html += `</ul></div>`
        })

        displayResults(html)
      } catch (error) {
        displayResults(`<p class="error">‚ùå Erreur: ${error.message}</p>`)
      }
    }

    async function listFirst50Cards() {
      displayResults('<p class="info">‚è≥ Chargement des 50 premi√®res cartes de l\'extension 151...</p>')

      try {
        const { data: cards, error } = await supabase
          .from('cardmarket_singles')
          .select('id_product, name, id_expansion, id_metacard')
          .eq('id_expansion', 1549)
          .order('id_product')
          .limit(50)

        if (error) throw error

        let html = '<h2>üìã 50 Premi√®res Cartes de l\'Extension 151</h2>'
        html += `<p class="success">‚úÖ ${cards.length} cartes charg√©es</p>`
        html += '<p class="info">üí° Cherchez Squirtle dans cette liste pour trouver son ID produit</p>'

        cards.forEach((card, index) => {
          const isSquirtle = card.name.toLowerCase().includes('squirtle')
          html += `<div class="card" ${isSquirtle ? 'style="border: 2px solid #fbbf24; background: #2a2210;"' : ''}>
            <h3>${index + 1}. ${card.name} ${isSquirtle ? '‚ö° SQUIRTLE TROUV√â !' : ''}</h3>
            <p><strong>ID Produit:</strong> ${card.id_product}</p>
            <p><strong>ID Metacard:</strong> ${card.id_metacard}</p>
            <div class="url-test">
              <strong>Test URL par ID (nouvelle approche):</strong><br/>
              <a href="https://www.cardmarket.com/en/Pokemon/Products/${card.id_product}?language=2" target="_blank">
                ‚Üí https://www.cardmarket.com/en/Pokemon/Products/${card.id_product}
              </a>
            </div>
          </div>`
        })

        displayResults(html)
      } catch (error) {
        displayResults(`<p class="error">‚ùå Erreur: ${error.message}</p>`)
      }
    }

    async function findCorrectExpansionId() {
      displayResults('<p class="info">‚è≥ Recherche du bon ID d\'extension pour 151 (cartes avec MEW dans le nom)...</p>')

      try {
        // Chercher toutes les cartes avec "MEW" dans le nom (code de l'extension 151)
        const { data: cards, error } = await supabase
          .from('cardmarket_singles')
          .select('id_product, name, id_expansion, id_metacard')
          .ilike('name', '%MEW%')
          .limit(100)

        if (error) throw error

        // Grouper par id_expansion
        const expansionGroups = {}
        cards.forEach(card => {
          if (!expansionGroups[card.id_expansion]) {
            expansionGroups[card.id_expansion] = []
          }
          expansionGroups[card.id_expansion].push(card)
        })

        let html = '<h2>üîç Recherche de l\'extension 151 (cartes avec MEW)</h2>'
        html += `<p class="success">‚úÖ ${cards.length} cartes trouv√©es avec "MEW" dans le nom</p>`
        html += `<p class="info">üìä ${Object.keys(expansionGroups).length} extensions diff√©rentes trouv√©es</p>`

        // Afficher chaque extension
        Object.entries(expansionGroups).forEach(([expansionId, cards]) => {
          html += `<div class="card">
            <h3>Extension ID: ${expansionId} <span class="warning">(${cards.length} cartes)</span></h3>
            <p class="info">Exemples de cartes dans cette extension :</p>
            <ul>`
          cards.slice(0, 5).forEach(card => {
            const isSquirtle = card.name.toLowerCase().includes('squirtle')
            html += `<li ${isSquirtle ? 'style="color: #fbbf24; font-weight: bold;"' : ''}>
              ${card.name} ${isSquirtle ? '‚ö° SQUIRTLE !' : ''}
              <br/><small>ID Produit: ${card.id_product}</small>
            </li>`
          })
          html += `</ul>
            <div class="url-test">
              <strong>Tester avec ce ID d'extension :</strong><br/>
              <button onclick="listCardsFromExpansion(${expansionId})" style="background: #60a5fa; margin-top: 10px;">
                Voir toutes les cartes de l'extension ${expansionId}
              </button>
            </div>
          </div>`
        })

        displayResults(html)
      } catch (error) {
        displayResults(`<p class="error">‚ùå Erreur: ${error.message}</p>`)
      }
    }

    async function listCardsFromExpansion(expansionId) {
      displayResults(`<p class="info">‚è≥ Chargement des cartes de l'extension ${expansionId}...</p>`)

      try {
        const { data: cards, error } = await supabase
          .from('cardmarket_singles')
          .select('id_product, name, id_expansion, id_metacard')
          .eq('id_expansion', expansionId)
          .order('name')
          .limit(100)

        if (error) throw error

        let html = `<h2>üìã Cartes de l'extension ${expansionId}</h2>`
        html += `<p class="success">‚úÖ ${cards.length} cartes charg√©es (limite 100)</p>`

        cards.forEach((card, index) => {
          const isSquirtle = card.name.toLowerCase().includes('squirtle') && !card.name.toLowerCase().includes('ditto')
          html += `<div class="card" ${isSquirtle ? 'style="border: 2px solid #22c55e; background: #0a2a0a;"' : ''}>
            <h3>${index + 1}. ${card.name} ${isSquirtle ? 'üéØ VRAI SQUIRTLE !' : ''}</h3>
            <p><strong>ID Produit:</strong> ${card.id_product}</p>
            <p><strong>ID Metacard:</strong> ${card.id_metacard}</p>
            <div class="url-test">
              <a href="https://www.cardmarket.com/en/Pokemon/Products/${card.id_product}?language=2" target="_blank">
                ‚Üí Test URL par ID
              </a>
            </div>
          </div>`
        })

        displayResults(html)
      } catch (error) {
        displayResults(`<p class="error">‚ùå Erreur: ${error.message}</p>`)
      }
    }

    async function searchSquirtleEverywhere() {
      displayResults('<p class="info">‚è≥ Recherche de TOUTES les cartes "Squirtle" dans cardmarket_singles (toutes extensions confondues)...</p>')

      try {
        const { data: cards, error } = await supabase
          .from('cardmarket_singles')
          .select('id_product, name, id_expansion, id_metacard')
          .ilike('name', '%squirtle%')
          .order('name')
          .limit(100)

        if (error) throw error

        // Grouper par extension
        const byExtension = {}
        cards.forEach(card => {
          if (!byExtension[card.id_expansion]) {
            byExtension[card.id_expansion] = []
          }
          byExtension[card.id_expansion].push(card)
        })

        let html = '<h2>üîé Toutes les cartes "Squirtle" dans la base CardMarket</h2>'
        html += `<p class="success">‚úÖ ${cards.length} cartes trouv√©es au total</p>`
        html += `<p class="warning">üìä R√©parties dans ${Object.keys(byExtension).length} extensions diff√©rentes</p>`

        // Afficher par extension
        Object.entries(byExtension).forEach(([expansionId, cards]) => {
          html += `<div class="card">
            <h3>Extension ID: ${expansionId} <span class="info">(${cards.length} cartes Squirtle)</span></h3>
            <ul>`
          cards.forEach(card => {
            const isDitto = card.name.toLowerCase().includes('ditto')
            html += `<li>
              <strong ${!isDitto ? 'style="color: #22c55e;"' : ''}>${card.name}</strong>
              ${!isDitto ? 'üéØ VRAI SQUIRTLE !' : '(Ditto)'}
              <br/><small>ID Produit: ${card.id_product} | ID Metacard: ${card.id_metacard}</small>
              <br/><a href="https://www.cardmarket.com/en/Pokemon/Products/${card.id_product}?language=2" target="_blank" style="color: #60a5fa;">
                ‚Üí Test URL par ID
              </a>
            </li>`
          })
          html += `</ul></div>`
        })

        // Conclusion
        html += `<div class="card" style="background: #2a2a0a; border: 2px solid #fbbf24;">
          <h3 class="warning">üí° Conclusion Importante</h3>
          <p>Si vous ne voyez QUE des cartes "Ditto [Squirtle...]" et AUCUN vrai Squirtle, cela signifie que :</p>
          <ul>
            <li>‚ùå La base <code>cardmarket_singles</code> est <strong>INCOMPL√àTE</strong></li>
            <li>‚ùå Les cartes de l'extension 151 n'ont <strong>PAS √©t√© import√©es</strong></li>
            <li>‚úÖ Solution : Utiliser le <strong>matching automatique</strong> (bouton "Trouver lien direct") au lieu de construire l'URL manuellement</li>
          </ul>
        </div>`

        displayResults(html)
      } catch (error) {
        displayResults(`<p class="error">‚ùå Erreur: ${error.message}</p>`)
      }
    }
  </script>
</body>
</html>
